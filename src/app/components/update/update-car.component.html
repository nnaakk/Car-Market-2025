<h2>Обнови автомобил</h2>

<form [formGroup]="carForm" (ngSubmit)="updateCar()" *ngIf="carForm">
  <div class="container">
    <div class="info">
  <!-- Марка -->
  <label for="brand">Марка</label>
  <input id="brand" type="text" formControlName="brand">
  @if (carForm.get('brand')?.invalid && carForm.get('brand')?.touched) {
    <p style="color: red;">Марката е задължителна.</p>
  }

  <!-- Тип -->
  <label for="typ">Тип</label>
  <select id="typ" formControlName="typ">
    <option value="">Избери тип</option>
    <option value="Sedan">Sedan</option>
    <option value="Coupe">Coupe</option>
    <option value="SUV">SUV</option>
    <option value="Hatchback">Hatchback</option>
  </select>
  @if (carForm.get('typ')?.invalid && carForm.get('typ')?.touched) {
    <p style="color: red;">Типът е задължителен.</p>
  }

  <!-- Мощност -->
  <label for="power">Мощност</label>
  <input id="power" type="text" formControlName="power">
  @if (carForm.get('power')?.invalid && carForm.get('power')?.touched) {
    <p style="color: red;">Мощността е задължителна.</p>
  }

  <!-- Година -->
  <label for="year">Година</label>
  <input id="year" type="number" formControlName="year">
  @if (carForm.get('year')?.invalid && carForm.get('year')?.touched) {
    <p style="color: red;">Годината трябва да е валидна.</p>
  }

  <!-- Описание -->
  <label for="description">Описание</label>
  <textarea id="description" formControlName="description"></textarea>
  @if (carForm.get('description')?.invalid && carForm.get('description')?.touched) {
    <p style="color: red;">Описанието е задължително.</p>
  }

  <!-- Цена -->
  <label for="price">Цена</label>
  <input id="price" type="number" formControlName="price">

  <!-- Дата -->
  <label for="date">Дата</label>
  <input id="date" type="date" formControlName="date">
  
   <!-- Изпрати -->
  <button type="submit" [disabled]="carForm.invalid">Обнови автомобил</button>
  <!-- Изображения -->

  </div>
  
  <div class="image" formArrayName="images">
    <label>Редактирай изображения</label>

    @for (imgCtrl of images.controls; track $index) {
      <div class="img-order">
      <input class="inp"  [formControlName]="$index" type="text" placeholder="Image URL {{ $index + 1 }}">
      @if (imgCtrl.value) {
        <img [src]="imgCtrl.value" width="120">
      }
     
      @if (imgCtrl.invalid && imgCtrl.touched) {
        <p style="color: red;">Image URL {{ $index + 1 }} е задължителен.</p>
      
    }
    </div>
  }
   
  </div>

 
  </div>
</form>
